const main=document.getElementsByTagName("main")[0];async function movieGrid(){try{let e=await fetch("./data/movies.json");(await e.json()).forEach(e=>{const t=document.createElement("figure");main.appendChild(t),t.classList.add("main-figure");const n=document.createElement("img");t.appendChild(n),n.src=`assets/img/${e.movieTag}.jpg`,n.alt=e.title,n.onclick=detailView.bind(n,e);const i=document.createElement("figcaption");t.appendChild(i),i.innerText=e.title})}catch(e){console.error(e)}}function detailView(e){const t=document.createElement("section");main.appendChild(t),t.classList.add("modal");const n=document.createElement("div");t.appendChild(n),n.classList.add("modal-content");const i=document.createElement("figcaption");n.appendChild(i),i.innerText=e.title;const a=document.createElement("figure");n.appendChild(a),a.classList.add("modal-figure");const c=document.createElement("img");a.appendChild(c),c.src=`assets/img/${e.movieTag}.jpg`,c.alt=e.title;const o=document.createElement("p");a.appendChild(o),o.innerText=e.synopsis;const d=document.createElement("span");n.appendChild(d),d.innerText="Close",d.onclick=function(){closeModal()},document.addEventListener("keydown",escapeKeyListener)}function escapeKeyListener(e){27===e.keyCode&&closeModal()}function closeModal(){const e=document.getElementsByTagName("section")[0];main.removeChild(e),document.removeEventListener("keydown",escapeKeyListener)}movieGrid();